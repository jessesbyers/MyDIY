<div class="row">
    <div class="col"> 

        <h1> Updates for <%= link_to @goal.title, goal_path(@goal) %> </h1>
        <h3><%= link_to @goal.project.address, project_path(@goal.project) %></h3>

        <% if current_user.projects.primary_or_owner_or_update.include?(@goal.project) %>
            <button class="btn btn-outline-primary" ><%= link_to "Add an Update for this Goal", new_goal_update_path(@goal) %></button>
        <% end %>

    </div>
</div>
<br>


<ul>
<% @goal.updates.reverse.each do |update| %>

    <div class="row">
        <div class="col">
            <div class="card" >
                <div class="card-header">

                    <li> <%= update.user.username %> - <%= update.human_readable_date %> - <%= update.content %></li>

                    <% if current_user.projects.primary_or_owner_or_update.include?(@goal.project) %>
                        <%= form_with(url: update_path(update), method: 'delete') do |f| %>
                            <%= f.hidden_field :goal_id, :value => params[:goal_id] %>
                            <%= f.submit "Delete Update", :class => "btn btn-outline-danger" %>
                        <% end %>
                    <% end %>

                </div>
            </div>
        </div>
    </div>
<% end %>
</ul>
